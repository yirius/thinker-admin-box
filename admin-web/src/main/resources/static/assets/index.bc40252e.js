import{_ as D,L as F}from"./index.4634ff3e.js";import b from"./tip.3837905e.js";import{C as E}from"./cropperjs.f8d72405.js";import{M as k,N as L,O as A}from"./@element-plus.1487391f.js";import{d as B,r as h,w as T,n as V,_ as m,o as y,K as w,$ as n,a as r,X as x,L as I,a3 as c,a2 as v}from"./@vue.2fc568c1.js";import"./vue-i18n.36c67e35.js";import"./@intlify.7df7362d.js";import"./axios.d2ab6b2c.js";import"./qs.361ab08d.js";import"./side-channel.a4b5bd0c.js";import"./get-intrinsic.1675b33e.js";import"./has-symbols.caae0f97.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.0b5a4f26.js";import"./object-inspect.62630b2b.js";import"./dotenv.7e6d7ced.js";import"./@kangc.ec979c3e.js";import"./vue.300b83f3.js";import"./element-plus.c13ad818.js";import"./lodash.01006d1a.js";import"./@popperjs.d772622c.js";import"./dayjs.7e511c20.js";import"./async-validator.5d25c98b.js";import"./memoize-one.4ee5c96d.js";import"./normalize-wheel-es.9a219a59.js";import"./vuex.a5034c37.js";import"./vue-router.73d0d986.js";import"./nprogress.45e58d6b.js";import"./vue3-sfc-loader.41fe0098.js";import"./@vueuse.e05d5cea.js";import"./throttle-debounce.9c252086.js";import"./sortablejs.3cc0441d.js";import"./echarts.ca7a4e02.js";import"./zrender.9caa3fba.js";import"./tslib.60310f1a.js";/* empty css                      */import"./vite-plugin-mock.33c3a5ac.js";import"./mockjs.9ddc5731.js";import"./path-to-regexp.3eda823b.js";const N=B({components:{Layer:F,Tip:b},props:{layer:{type:Object,required:!0,deafult:()=>({show:!1})},modelValue:{type:String,default:""}},setup(e,g){let t=h(null);const p="image"+new Date().getTime(),d="preview"+new Date().getTime();let u=h(null);T(()=>e.layer.show,o=>{!o||V(()=>{s()})});function s(){t.value&&t.value.destroy();const o=document.getElementById(p);t.value=new E(o,{preview:"."+d})}function i(o,a){_(o),u.value.clearFiles()}function _(o){let a=new FileReader;a.readAsDataURL(o.raw),a.onload=function(l){document.getElementById(p).setAttribute("src",this.result),s()}}function f(){const a=t.value.getCroppedCanvas({maxWidth:4096,maxHeight:4096}).toDataURL()||"";let l=document.createElement("a");l.href=a,l.download="\u622A\u56FE\u4E0B\u8F7D.png",l.click()}function C(){const a=t.value.getCroppedCanvas({maxWidth:4096,maxHeight:4096}).toDataURL();g.emit("update:modelValue",a),e.layer.show=!1}return{Upload:k,Download:L,Picture:A,cropper:t,uploadchange:i,imgId:p,previewClass:d,uploadDom:u,downloadCropper:f,saveAsModel:C}}}),U={class:"container"},$={class:"box"},R=["id","src"],M={class:"box"},H={class:"handle-box"},O=v("\u4E0A\u4F20\u56FE\u7247"),P=v("\u4E0B\u8F7D\u622A\u56FE\u81F3\u672C\u5730"),W=v("\u4FDD\u5B58\u622A\u56FE");function j(e,g,t,p,d,u){const s=m("Tip"),i=m("el-button"),_=m("el-upload"),f=m("Layer");return y(),w(f,{layer:e.layer,width:"1000"},{default:n(()=>[r("div",U,[r("div",$,[r("img",{id:e.imgId,class:"default-img",src:e.modelValue},null,8,R)]),r("div",M,[r("div",{class:x([e.previewClass,"preview"])},null,2)])]),e.cropper?(y(),w(s,{key:0,cropper:e.cropper},null,8,["cropper"])):I("",!0),r("div",H,[c(_,{class:"upload-demo",action:"","auto-upload":!1,accept:"image/*",ref:"uploadDom","on-change":e.uploadchange},{default:n(()=>[c(i,{type:"primary",icon:e.Upload,style:{"margin-right":"10px"}},{default:n(()=>[O]),_:1},8,["icon"])]),_:1},8,["on-change"]),c(i,{type:"primary",icon:e.Download,onClick:e.downloadCropper},{default:n(()=>[P]),_:1},8,["icon","onClick"]),c(i,{type:"primary",icon:e.Picture,onClick:e.saveAsModel},{default:n(()=>[W]),_:1},8,["icon","onClick"])])]),_:1},8,["layer"])}var Ve=D(N,[["render",j],["__scopeId","data-v-2eae20d8"]]);export{Ve as default};
