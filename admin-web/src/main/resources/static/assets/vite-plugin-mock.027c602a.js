import{m as c}from"./mockjs.fbe85ee3.js";import{p as u}from"./path-to-regexp.3eda823b.js";const s=c;function y(t){s.XHR.prototype.__send=s.XHR.prototype.send,s.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const e={};for(let o in this.custom.requestHeaders)e[o.toString().toLowerCase()]=this.custom.requestHeaders[o];this.custom.options=Object.assign({},this.custom.options,{headers:e})}this.__send.apply(this,arguments)},s.XHR.prototype.proxy_open=s.XHR.prototype.open,s.XHR.prototype.open=function(){let e=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&e&&(this.custom.xhr.responseType=e)};for(const{url:e,method:o,response:r,timeout:p}of t)f(p),s.mock(u(e,void 0,{end:!1}),o||"get",h(r))}function a(t){const e=t.split("?")[1];return e?JSON.parse('{"'+decodeURIComponent(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function h(t){return function(e){let o=null;if(typeof t=="function"){const{body:r,type:p,url:n,headers:i}=e;o=t({method:p,body:JSON.parse(r),query:a(n),headers:i})}else o=t;return s.mock(o)}}function f(t=0){t&&s.setup({timeout:t})}export{y as c};
