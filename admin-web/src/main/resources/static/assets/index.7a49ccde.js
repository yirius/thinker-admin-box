import{_ as w,L as C}from"./index.dd1da4b6.js";import k from"./tip.962202b2.js";import{C as x}from"./cropperjs.f8d72405.js";import{U as D,x as F,y as E}from"./@element-plus.f7fcbb73.js";import{a3 as A,k as _,aX as B,ak as L,aF as c,ax as h,Q as g,b0 as r,W as s,A as T,U,a1 as d,a0 as b}from"./@vue.559b001e.js";import"./vue-i18n.b013bd4b.js";import"./@intlify.7df7362d.js";import"./axios.d2ab6b2c.js";import"./qs.67967ad9.js";import"./side-channel.9caedf91.js";import"./get-intrinsic.1675b33e.js";import"./has-symbols.caae0f97.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.0b5a4f26.js";import"./object-inspect.a91d3e60.js";import"./xlsx.5af0aaf1.js";import"./mockjs.fbe85ee3.js";import"./element-plus.4e647bc4.js";import"./lodash.79e1ad93.js";import"./@popperjs.a8a4a6a0.js";import"./dayjs.f5211fdf.js";import"./async-validator.5d25c98b.js";import"./memoize-one.4ee5c96d.js";import"./normalize-wheel-es.9a219a59.js";import"./vuex.7f9e2f80.js";import"./vue-router.7e2488e1.js";import"./nprogress.1eb72115.js";import"./vue3-sfc-loader.41fe0098.js";import"./vue.51eda945.js";import"./@vueuse.ccac29d9.js";import"./throttle-debounce.9c252086.js";import"./sortablejs.3cc0441d.js";import"./echarts.b37547bc.js";import"./zrender.9e5c8901.js";import"./tslib.34a40861.js";/* empty css                      */import"./vite-plugin-mock.027c602a.js";import"./path-to-regexp.3eda823b.js";const V=A({components:{Layer:C,Tip:k},props:{layer:{type:Object,required:!0,deafult:()=>({show:!1})},modelValue:{type:String,default:""}},setup(e,v){let a=_(null);const n="image"+new Date().getTime(),m="preview"+new Date().getTime();let u=_(null);B(()=>e.layer.show,o=>{!o||L(()=>{p()})});function p(){a.value&&a.value.destroy();const o=document.getElementById(n);a.value=new x(o,{preview:"."+m})}function i(o,t){f(o),u.value.clearFiles()}function f(o){let t=new FileReader;t.readAsDataURL(o.raw),t.onload=function(l){document.getElementById(n).setAttribute("src",this.result),p()}}function j(){const t=a.value.getCroppedCanvas({maxWidth:4096,maxHeight:4096}).toDataURL()||"";let l=document.createElement("a");l.href=t,l.download="\u622A\u56FE\u4E0B\u8F7D.png",l.click()}function y(){const t=a.value.getCroppedCanvas({maxWidth:4096,maxHeight:4096}).toDataURL();v.emit("update:modelValue",t),e.layer.show=!1}return{Upload:D,Download:F,Picture:E,cropper:a,uploadchange:i,imgId:n,previewClass:m,uploadDom:u,downloadCropper:j,saveAsModel:y}}}),z={class:"container"},I={class:"box"},N=["id","src"],R={class:"box"},$={class:"handle-box"},W=b("\u4E0A\u4F20\u56FE\u7247"),q=b("\u4E0B\u8F7D\u622A\u56FE\u81F3\u672C\u5730"),H=b("\u4FDD\u5B58\u622A\u56FE");function M(e,v,a,n,m,u){const p=c("Tip"),i=c("el-button"),f=c("el-upload"),j=c("Layer");return h(),g(j,{layer:e.layer,width:"1000"},{default:r(()=>[s("div",z,[s("div",I,[s("img",{id:e.imgId,class:"default-img",src:e.modelValue},null,8,N)]),s("div",R,[s("div",{class:T([e.previewClass,"preview"])},null,2)])]),e.cropper?(h(),g(p,{key:0,cropper:e.cropper},null,8,["cropper"])):U("",!0),s("div",$,[d(f,{class:"upload-demo",action:"","auto-upload":!1,accept:"image/*",ref:"uploadDom","on-change":e.uploadchange},{default:r(()=>[d(i,{type:"primary",icon:e.Upload,style:{"margin-right":"10px"}},{default:r(()=>[W]),_:1},8,["icon"])]),_:1},8,["on-change"]),d(i,{type:"primary",icon:e.Download,onClick:e.downloadCropper},{default:r(()=>[q]),_:1},8,["icon","onClick"]),d(i,{type:"primary",icon:e.Picture,onClick:e.saveAsModel},{default:r(()=>[H]),_:1},8,["icon","onClick"])])]),_:1},8,["layer"])}var Be=w(V,[["render",M],["__scopeId","data-v-6b991ded"]]);export{Be as default};
